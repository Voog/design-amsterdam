var MMCQ,PriorityQueue;!function(e){e.fn.autogrow=function(t){return this.filter("textarea").each(function(){var o=this,n=e(o),i=n.height(),r=n.hasClass("autogrow-short")?0:parseInt(n.css("lineHeight"))||0,s=e("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n.width(),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),fontWeight:n.css("fontWeight"),lineHeight:n.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),t=function(t){var e=o.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(t){return function(t,e){for(var o=0,n="";o<e;o++)n+=t;return n}("&nbsp;",t.length-1)+" "});t&&t.data&&"keydown"===t.data.event&&13===t.keyCode&&(e+="<br />"),s.css("width",n.width()),s.html(e+(0===r?"...":"")),n.height(Math.max(s.height()+r,i))};n.change(t).keyup(t).keydown({event:"keydown"},t),e(window).resize(t),t()})}}(jQuery),PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var p,s,l,T,u,d;function b(){this.maxIterations=1e3,this.fractByPopulations=.75}return b.rshift=8-(b.sigbits=5),T=function(t,e,o){return(t<<2*b.sigbits)+(e<<b.sigbits)+o},p=function(){function t(t,e,o,n,i,r,s){this.r1=t,this.r2=e,this.g1=o,this.g2=n,this.b1=i,this.b2=r,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,o,n,i,r,s,a,c,h,l,u;if(!this._count_set||t){for(i=0,r=s=this.r1,h=this.r2;s<=h;r=s+=1)for(o=a=this.g1,l=this.g2;a<=l;o=a+=1)for(e=c=this.b1,u=this.b2;c<=u;e=c+=1)n=T(r,o,e),i+=this.histo[n]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,o,n,i,r,s,a,c,h,l,u,d,f,p,g,m;if(!this._average||t){for(a=1<<8-b.sigbits,o=i=h=l=0,c=u=this.r1,p=this.r2;u<=p;c=u+=1)for(n=d=this.g1,g=this.g2;d<=g;n=d+=1)for(e=f=this.b1,m=this.b2;f<=m;e=f+=1)s=T(c,n,e),l+=r=this.histo[s]||0,h+=r*(c+.5)*a,i+=r*(n+.5)*a,o+=r*(e+.5)*a;this._average=l?[~~(h/l),~~(i/l),~~(o/l)]:[~~(a*(this.r1+this.r2+1)/2),~~(a*(this.g1+this.g2+1)/2),~~(a*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,o,n;return n=t[0]>>b.rshift,o=t[1]>>b.rshift,e=t[2]>>b.rshift,this.r1<=n&&n<=this.r2&&this.g1<=o&&o<=this.g2&&this.b1<=e&&e<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,n;for(e=o=0,n=this.cboxes.size();o<n;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,n,i,r,s,a;for(r=function(t){return t*t},n=1e9,o=s=0,a=this.cboxes.size();s<a;o=s+=1)(e=Math.sqrt(r(t[0]-this.cboxes.peek(o).color[0])+r(t[1]-this.cboxes.peek(o).color[1])+r(t[2]-this.cboxes.peek(o).color[2])))<n&&(n=e,i=this.cboxes.peek(o).color);return i},t}(),u=function(t){var e,o,n,i,r,s,a,c;for(n=new Array(1<<3*b.sigbits),a=0,c=t.length;a<c;a++)s=(r=t[a])[0]>>b.rshift,o=r[1]>>b.rshift,e=r[2]>>b.rshift,n[i=T(s,o,e)]=(n[i]||0)+1;return n},l=function(t,e){var o,n,i,r,s,a,c,h,l,u,d,f;for(i=a=u=1e6,d=n=s=l=0,f=t.length;d<f;d++)(h=(c=t[d])[0]>>b.rshift)<u?u=h:l<h&&(l=h),(r=c[1]>>b.rshift)<a?a=r:s<r&&(s=r),(o=c[2]>>b.rshift)<i?i=o:n<o&&(n=o);return new p(u,l,a,s,i,n,e)},d=function(t,d){var e,o,n,i,r,f,s,p,a,c,h,g,l,u,m,b,w,v,y,x,C,k,M,z,P,_,F,j,H,A;if(d.count()){if(1===d.count())return[d.copy()];if(c=d.r2-d.r1+1,r=d.g2-d.g1+1,o=d.b2-d.b1+1,s=Math.max(c,r,o),g=0,p=[],f=[],s===c)for(a=l=d.r1,k=d.r2;l<=k;a=l+=1){for(h=0,i=u=d.g1,F=d.g2;u<=F;i=u+=1)for(e=m=d.b1,j=d.b2;m<=j;e=m+=1)h+=t[T(a,i,e)]||0;g+=h,p[a]=g}else if(s===r)for(i=b=d.g1,H=d.g2;b<=H;i=b+=1){for(h=0,a=w=d.r1,A=d.r2;w<=A;a=w+=1)for(e=v=d.b1,M=d.b2;v<=M;e=v+=1)h+=t[T(a,i,e)]||0;g+=h,p[i]=g}else for(e=y=d.b1,z=d.b2;y<=z;e=y+=1){for(h=0,a=x=d.r1,P=d.r2;x<=P;a=x+=1)for(i=C=d.g1,_=d.g2;C<=_;i=C+=1)h+=t[T(a,i,e)]||0;g+=h,p[e]=g}return p.forEach(function(t,e){return f[e]=g-t}),n=function(t){var e,o,n,i,r,s,a,c,h,l,u;for(s=t+"2",a=l=d[r=t+"1"],u=d[s];l<=u;a=l+=1)if(p[a]>g/2){for(e=d.copy(),o=d.copy(),i=(c=a-d[r])<=(h=d[s]-a)?Math.min(d[s]-1,~~(a+h/2)):Math.max(d[r],~~(a-1-c/2));!p[i];)i++;for(n=f[i];!n&&p[i-1];)n=f[--i];return e[s]=i,o[r]=e[s]+1,[e,o]}},s===c?n("r"):s===r?n("g"):s===o?n("b"):void 0}},b.prototype.quantize=function(t,e){var a,o,c,n,i,r,h=this;if(!t.length||e<2||256<e)return console.log("invalid arguments"),!1;for(c=u(t),a=l(t,c),(i=new PriorityQueue(function(t,e){var o,n;return o=t.count(),(n=e.count())<o?1:o<n?-1:0})).push(a),(n=function(t,e){var o,n,i,r,s;for(r=1,s=0;s<h.maxIterations;)if((a=t.pop()).count()){if(o=(i=d(c,a))[0],n=i[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),n&&(t.push(n),r++),e<=r)return;if(s++>h.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),s++})(i,this.fractByPopulations*e),r=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),(n=e.count()*e.volume())<o?1:o<n?-1:0});i.size();)r.push(i.pop());for(n(r,e-r.size()),o=new s;r.size();)o.push(r.pop());return o},b}.call(this),function(){window.ColorExtract=function(){function m(){}return m.getColorMap=function(t,e,o,n,i,r){var s,a,c,h,l,u,d,f,p,g;for(null==r&&(r=8),c=t.getContext("2d").getImageData(e,o,n,i).data,h=[],u=d=o,p=o+i;d<p;u=d+=1)for(a=u*n*4,l=f=e,g=e+n;f<g;l=f+=1)s=a+4*l,h.push([c[s],c[s+1],c[s+2]]);return(new MMCQ).quantize(h,r)},m.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},m.extract=function(t,e,o){var n,i,r,s,a,c,h,l,u,d,f,p,g;for(e.width=25,e.height=25,e.getContext("2d").drawImage(t,0,0,e.width,e.height),(i=m.getColorMap(e,0,0,e.width,e.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),n=i[0].rgb,(h=m.getColorMap(e,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),d=l=0,p=h.length;d<p;d++)r=h[d],l<(s=m.colorDist(n,r.rgb))&&(l=s,a=r.rgb);for(f=l=0,g=h.length;f<g;f++)r=h[f],l<(s=m.colorDist(n,r.rgb))&&r.rgb!==a&&(l=s,c=r.rgb);return o({bgColor:(u=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:u(a),fgColor2:u(c)})},m}()}.call(this),function(u){var o="placeholder"in document.createElement("input"),d=["-moz-box-sizing","-webkit-box-sizing","box-sizing","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","border-top-width","border-right-width","border-bottom-width","border-left-width","line-height","font-size","font-family","width","height","top","left","right","bottom"];u.fn.placeholder=function(t){var e=this;return t=t||{},o&&!t.force||window.setTimeout(function(){e.each(function(){var t=this.tagName.toLowerCase();"input"!==t&&"textarea"!==t||function(t,e){var o,n,i,r,s,a,c,h=u(t);try{if(!h[0].getAttributeNode("placeholder"))return;if(!(n=h[0].getAttribute("placeholder"))||!n.length)return;h[0].setAttribute("placeholder",""),h.data("placeholder",n)}catch(t){return}for(i={},o=0;o<d.length;o++)i[d[o]]=h.css(d[o]);function l(){c.toggle(!u.trim(h.val()).length)}r=parseInt(h.css("z-index"),10),!isNaN(r)&&r||(r=1),(c=u("<span>").addClass("placeholder").html(n)).css(i),c.css({cursor:h.css("cursor")||"text",display:"block",position:"absolute",overflow:"hidden","z-index":r+1,background:"none","border-top-style":"solid","border-right-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-top-color":"transparent","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"transparent"}),c.insertBefore(h),a=h.offset().top-c.offset().top,s=parseInt(c.css("margin-top")),isNaN(s)&&(s=0),c.css("margin-top",s+a),c.on("mousedown",function(){h.is(":enabled")&&window.setTimeout(function(){h.trigger("focus")},0)}),h.on("focus.placeholder",function(){c.hide()}),h.on("blur.placeholder",function(){l()}),h[0].onpropertychange=function(){"value"===event.propertyName&&l()},h.trigger("blur.placeholder")}(this)})},0),this}}(jQuery),function(o){var t=function(t){this.$el=o(t),this.init()};t.prototype={init:function(){o(".form_field").each(o.proxy(function(t,e){0<o(e).find('input[type="text"]').length&&(o(e).find('input[type="text"]').attr("placeholder",o(e).find("label").text()),o(e).find("label").hide(),o.fn.placeholder&&o(e).find('input[type="text"]').placeholder()),0<o(e).find("textarea").length&&(o(e).find("textarea").attr("placeholder",o(e).find("label").text()),o(e).find("label").hide(),o.fn.placeholder&&o(e).find("textarea").placeholder())},this))}},o.fn.edicyFormPlaceholders=function(){return this.each(function(){o(this).data("edicyFormPlaceholders")||o(this).data("edicyFormPlaceholders",new t(this))})}}(jQuery),function(P){var t,e,o,n,i=P("html").hasClass("editmode"),r=function(t){var e,o,n,i,r=t.stickyHeader||!1,s=t.stickyMobileMenu||!1,a=t.stickyFooter||!1,c=t.stickyPostHeaders||!1,h=P(".container"),l=P(".header"),u=P(".footer"),d=P(l).height()+90,f=P(u).height()+90,p=!1,g=function(){var t=P(".post"),o=[];return t.each(function(t,e){o.push(e.getBoundingClientRect().top)}),o},m=function(i){e=e?(o=P(window).scrollTop(),n=o-e,window.innerWidth<640&&s&&(5<n&&d<e?P(".topbar").addClass("fixed").css({top:-d}):n<-5&&d<e?P(".topbar").addClass("fixed").css({top:0}):n<0&&e<=100&&!0===P(".topbar").hasClass("fixed")&&(P(h).css({"margin-top":0}),P(".topbar").removeClass("fixed"))),640<window.innerWidth&&a&&(P(".post").eq(0).offset().top-P(window).innerHeight()+90<P(document).scrollTop()&&e+window.innerHeight<=P(document).height()-f-40?n<-5?C(!1):5<n&&y():x()),r&&P(l).find(".header-inner").height()<60&&(5<n&&d<e?b():n<-5&&d<e?(w(),setTimeout(function(){P(window).scrollTop()<=d&&v()},20)):n<-5&&e<=d&&v()),0):P(window).scrollTop(),640<window.innerWidth&&c&&P(".post").each(function(t,e){var o=P(e).find(".post-header"),n=-(P(e).height()-30-o.height());i[t]<30?i[t]>n?(o.removeClass("top bottom"),P(e).addClass("fixed-header")):(o.addClass("bottom").removeClass("top"),P(e).removeClass("fixed-header")):(o.addClass("top").removeClass("bottom"),P(e).removeClass("fixed-header"))})},b=function(){P(l).addClass("header-fixed").css({top:-d}),P(h).css({"padding-top":d})},w=function(){var t;t=P("body").hasClass("edy-checkout-button-visible")?P(".edy-ecommerce-shopping-cart-button").outerHeight():0,P(l).addClass("header-fixed header-animated").css({top:t}),P(h).css({"padding-top":d})},v=function(){P(l).removeClass("header-fixed header-animated"),P(h).css({"padding-top":0}),P(".post.fixed-header").removeClass("fixed-header")},y=function(){P(u).addClass("footer-fixed footer-animated footer-hidden"),P(u).css("bottom",-P(u).outerHeight())},x=function(){P(u).removeClass("footer-fixed footer-animated footer-hidden"),P("body").removeClass("voog-search-visible"),P(u).css({bottom:"",left:""}),P(h).css({"margin-bottom":""})},C=function(t){t=t||!1,P(u).addClass("footer-fixed footer-animated"),P(u).css({left:P(".container").offset().left,bottom:t?0:60-P(u).height()}),P(h).css({"margin-bottom":f})},k=function(t){t?P(u).hasClass("footer-fixed")&&(clearTimeout(i),C(!0),P("footer .gradient-overlay").hide()):P("footer").hasClass("footer-fixed")&&(i=setTimeout(function(){C(!1),P("footer .gradient-overlay").show()},1500))},M=function(){p||requestAnimationFrame(z),p=!0},z=function(){p=!1,640<P(window).width()&&m(g())};P(window).on("load resize",function(){640<P(window).width()?m(g()):(P(".container").css({"padding-top":"","margin-bottom":""}),P(".header-fixed").removeClass("header-fixed header-animated").css("top",""))}).on("scroll",function(){window.scrollY,M()}),P("footer").bind("mouseenter",function(){k(!0)}).bind("mouseleave",function(){k(!1)})};window.site=P.extend(window.site||{},{initFrontPage:function(t){(t=void 0!==t&&t)&&r({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1})},initCommonPage:function(t){(t=void 0!==t&&t)&&r({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),P.fn.autogrow&&P(".form_field_textarea").autogrow(),P(window).ready(function(){P.trim(P(".content-header").get(0).innerHTML)||P(".content-header").hide()})},initBlogPage:function(t){(t=void 0!==t&&t)&&r({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!0,stickyPostHeaders:!0}),P(window).ready(function(){P(".post").each(function(t,e){var o=P(e),n=o.find(".post-header").height();o.find(".post-content").css("min-height",n)})})},initArticlePage:function(t){(t=void 0!==t&&t)&&r({stickyHeader:!0,stickyMobileMenu:!0,stickyFooter:!1,stickyPostHeaders:!1}),P.fn.autogrow&&P(".form_field_textarea").autogrow()},bindSiteSearch:function(t,e,o){t&&new VoogSearch(t,{per_page:10,lang:e,resultsContainer:P(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:640,updateOnKeypress:!0,noResults:o})}}),P(".js-menu-toggle").click(function(){P(this).toggleClass("open"),P(".mobile-menu").toggleClass("expanded"),P(this).hasClass("open")?P(".js-search").addClass("hidden"):P(".js-search").removeClass("hidden")}),P("#lang-menu-toggle").click(function(t){t.stopPropagation(),P(this).toggleClass("open"),P("#toggleable-lang-menu").toggleClass("expanded")}),P("body").on("click",function(t){var e=P(t.target);0!==e.closest(".toggleable-lang-menu").length||e.is("#toggleable-lang-menu")||(P("#toggleable-lang-menu").removeClass("expanded"),P("body").removeClass("voog-search-visible")),P("#lang-menu-toggle").removeClass("open")}),P("html").click(function(t){var e=P(t.target);0===e.closest(".mobile-menu").length&&0===e.closest(".toggle-btn").length&&P(".mobile-menu").hasClass("expanded")&&(P(".mobile-menu").removeClass("expanded"),P(".js-menu-toggle").removeClass("open"),P(".js-menu-toggle").hasClass("open")||P(".js-search").removeClass("hidden"))}),P(".js-search-reset").click(function(t){t.preventDefault(),P("body").removeClass("voog-search-visible")}),P(".js-search-open").click(function(t){t.stopPropagation(),P("body").addClass("voog-search-visible"),P(".js-search-input").val("").focus()}),P(".js-search-close").click(function(t){P("body").removeClass("voog-search-visible")}),P(".js-search-input").click(function(t){t.stopPropagation()}),P(".js-voog-search-modal-inner").click(function(t){t.stopPropagation()}),i||P.each(P(".content-formatted table"),function(){P(this).wrap('<div class="table-container"></div>')}),P(document).ready(function(){P(".comment-form").hasClass("form_with_errors")?P("html, body").scrollTop(P(".comment-form").offset().top):0<P("form").find(".form_error, .form_notice").length&&P("html, body").scrollTop(P(".form_error, .form_notice").closest("form").offset().top)}),P(".content form").edicyFormPlaceholders(),!Modernizr.flexbox&&i&&(t=P(".js-header-inner").width(),e=P(".js-header-right"),o=e.width(),n=parseInt(e.css("margin-left"))+1,P(".js-header-left").css("min-width",t-o-n))}(jQuery),function(){for(var r=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var o=(new Date).getTime(),n=Math.max(0,16-(o-r)),i=window.setTimeout(function(){t(o+n)},n);return r=o+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();