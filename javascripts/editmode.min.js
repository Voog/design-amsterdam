!function(d){var h=function(e,a){for(var r,o=0,t=e.length;o<t;o++){if(e[o].width<a)return r||e[o];r=e[o]}return e[e.length-1]},c=function(){.5<=headerBgCombinedLightness?d(".js-background-type").addClass("light-background").removeClass("dark-background"):d(".js-background-type").addClass("dark-background").removeClass("light-background")},o=function(e,a){return function(r,o){if(r&&o){"string"==typeof r&&(r=r.replace(/rgba?\(/,"").replace(/\)/,"").split(","),d.each(r,function(e,a){r[e]=+a})),"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),d.each(o,function(e,a){o[e]=+a})),"object"==typeof r&&r.hasOwnProperty("length")&&3==r.length&&r.push(1),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1);var e=[0,0,0,0];return e[3]=1-(1-o[3])*(1-r[3]),0===e[3]&&(e[3]=1e-6),e[0]=Math.min(o[0]*o[3]/e[3]+r[0]*r[3]*(1-o[3])/e[3],255),e[1]=Math.min(o[1]*o[3]/e[3]+r[1]*r[3]*(1-o[3])/e[3],255),e[2]=Math.min(o[2]*o[3]/e[3]+r[2]*r[3]*(1-o[3])/e[3],255),d.map(e,function(e){return Math.floor(e)})}}(e||[255,255,255,1],a||[255,255,255,1])},u=function(e,a){var r=o(e,a);return Math.round((.2126*+r[0]+.7152*+r[1]+.0722*+r[2])/2.55)/100};window.site=d.extend(window.site||{},{toggleFlags:function(){d(".js-option-toggle-flags").on("click",function(e){if(e.stopPropagation(),d(this).hasClass("js-flag-disable-btn"))var a=!1;else a=!0;d(this).toggleClass("js-flag-disable-btn"),d("body").toggleClass("flags-enabled flags-disabled"),siteData.set("flags_state",a)})},getImageByWidth:h,headerBgPreview:function(e,a){var r=d(".js-header-banner").css("background-image"),o=e.imageSizes?h(e.imageSizes,d(window).width()):null,t=e.image&&""!==e.image?"url("+o.url+")":"none",n=e.imageSizes&&""!==e.imageSizes?e.imageSizes:null,g=e.color&&""!==e.color?e.color:"rgba(0,0,0,0)",i=(e.colorData&&""!==e.colorData&&e.colorData.lightness,d("<img>")),s=d("<canvas>"),l=e.image&&""!==e.image?e.image:null;l?function(e,a){for(var r=e.length;r--;)if(-1<a.indexOf(e[r].url.trim()))return!0;return!1}(n,r)?(headerBg.headerBgImageColor=headerBg.headerBgImageColor?headerBg.headerBgImageColor:"rgba(178,198,207,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,g),c()):(i.attr("src",l.replace(/.*\/(photos|voogstock)/g,"/photos")),i.on("load",function(){ColorExtract.extract(i[0],s[0],function(e){headerBg.headerBgImageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,g),c()})})):(headerBg.headerBgImageColor="rgba(255,255,255,1)",headerBgCombinedLightness=u(headerBg.headerBgImageColor,g),c()),d(a).css({"background-image":t}),d(a).find(".background-color").css({"background-color":g})},headerBgCommit:function(e,a){var r,o=d.extend(!0,{},e);o.image=e.image||"",o.imageSizes=null==(r=e.imageSizes)||"string"==typeof r&&r.match(/^[\\'"]+$/)?"":r,o.color=e.color||"rgba(255,255,255,0)",o.combinedLightness=headerBgCombinedLightness,pageData.set(a,o)},handleHeaderColorScheme:function(e){void 0!==e&&(.6<e?d(".header-wrapper").addClass("light").removeClass("dark"):d(".header-wrapper").addClass("dark").removeClass("light"))},bindCustomTexteditorStyles:function(e){window.edy=window.edy||[],edy.push(["texteditorStyles",{name:e,tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])}})}(jQuery);